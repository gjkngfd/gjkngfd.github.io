(this["webpackJsonpreact-three-fiber-machines-room"]=this["webpackJsonpreact-three-fiber-machines-room"]||[]).push([[0],{62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var o=a(6),r=a.n(o),c=a(24),n=a.n(c),i=a(10),s=a(18),l=a(12),j=a(14),h=a(16),d=a(64),b=a(65),u=a(66),p=a(45),O=a(29);var m=function(e){var t,a=e.cameraPosition;return(t=Object(h.g)().camera.position).set.apply(t,Object(j.a)(a)),null},g=a(11);var f,x,v=function(e){var t=e.position,a=e.name,o=e.id,r=(e.color,e.opacity),c=e.onMarkerClicked;return Object(g.jsx)("mesh",{position:t,children:Object(g.jsx)(d.a,{style:{opacity:"".concat(r)},children:Object(g.jsx)("div",{className:"overlay",onClick:function(){return c(o)},children:a})})})},y=(a(62),a(2)),w=a(51),M=a(48),P=a(49),S=a(31),k=a(50),C=["color","pos"];Object(h.d)({EffectComposer:w.a,RenderPass:P.a,OutlinePass:M.a,ShaderPass:S.a});var D=[-3,2,5],R=[0,0,0];function T(){var e=Object(o.useRef)(),t=Object(o.useContext)(I),a=Object(o.useCallback)((function(){return t((function(t){return[].concat(Object(j.a)(t),[e.current])}))}),[]),r=Object(o.useCallback)((function(){return t((function(t){return t.filter((function(t){return t!==e.current}))}))}),[]);return{ref:e,onPointerOver:a,onPointerOut:r}}function A(){return Object(g.jsx)(d.a,{children:Object(g.jsx)("p",{children:"Loading 3D Models..."})})}function L(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(o.useRef)(),n=Object(b.a)("models/room.glb").nodes,j=Object(O.useSpring)({"material-opacity":a?.9:1,config:{mass:10,tension:1e3,friction:300,precision:1e-5}}),h=(j.color,j.pos,Object(s.a)(j,C));return Object(g.jsx)("group",{ref:c,children:Object(g.jsx)(O.animated.mesh,Object(i.a)(Object(i.a)({visible:!0,geometry:n.Default.geometry,rotation:[0,0,0],receiveShadow:!0,position:[0,.002,0],onPointerOver:function(e){return r(!0)},onPointerOut:function(e){return r(!1)}},h),{},{children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"#358384",toneMapped:!0,opacity:1,transparent:!0})}))})}var z=function(e){var t=e.position,a=e.rotation,r=e.color,c=Object(o.useRef)(),n=Object(b.a)("models/machineModel.glb").nodes;return Object(g.jsxs)("group",{ref:c,position:t,rotation:a,children:[Object(g.jsx)("mesh",Object(i.a)(Object(i.a)({visible:!0,receiveShadow:!0,castShadow:!0,geometry:n.Default.geometry},T()),{},{children:Object(g.jsx)("meshLambertMaterial",{attach:"material",color:r,roughness:.9,toneMapped:!1})})),Object(g.jsx)("mesh",{visible:!0,ref:c,geometry:n.Default_2.geometry,rotation:[0,0,0],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:r,roughness:.9,toneMapped:!1})})]})},E=function(e){var t=e.position,a=e.rotation,r=e.color,c=Object(o.useRef)(),n=Object(b.a)("models/machineModel.glb").nodes;return Object(g.jsxs)("group",{ref:c,position:t,rotation:a,children:[Object(g.jsx)("mesh",Object(i.a)(Object(i.a)({visible:!0,receiveShadow:!0,castShadow:!0,geometry:n.Default.geometry},T()),{},{children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:r,roughness:.8,toneMapped:!1})})),Object(g.jsx)("mesh",{visible:!0,ref:c,geometry:n.Default_2.geometry,rotation:[0,0,0],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"red",roughness:.01,toneMapped:!1})})]})},B=function(e){var t=e.position,a=e.rotation,r=e.color,c=Object(o.useRef)(),n=Object(b.a)("models/machineModel.glb").nodes;return Object(g.jsxs)("group",{ref:c,position:t,rotation:a,children:[Object(g.jsx)("mesh",Object(i.a)(Object(i.a)({visible:!0,receiveShadow:!0,castShadow:!0,geometry:n.Default.geometry},T()),{},{children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:r,roughness:.8,toneMapped:!1})})),Object(g.jsx)("mesh",{visible:!0,ref:c,geometry:n.Default_2.geometry,rotation:[0,0,0],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:r,roughness:.01,toneMapped:!1})})]})},I=r.a.createContext(),N=function(e){var t=e.children,a=Object(h.g)(),r=a.gl,c=a.scene,n=a.camera,i=a.size,s=Object(o.useRef)(),j=Object(o.useState)([]),d=Object(l.a)(j,2),b=d[0],u=d[1],p=Object(o.useMemo)((function(){return new y.Vector2(i.width,i.height)}),[i]);return Object(o.useEffect)((function(){return s.current.setSize(i.width,i.height)}),[i]),Object(h.e)((function(){return s.current.render()}),1),Object(g.jsxs)(I.Provider,{value:u,children:[t,Object(g.jsxs)("effectComposer",{ref:s,args:[r],children:[Object(g.jsx)("renderPass",{attachArray:"passes",args:[c,n]}),Object(g.jsx)("outlinePass",{attachArray:"passes",args:[p,c,n],selectedObjects:b,visibleEdgeColor:"navy",edgeStrength:5,edgeThickness:2.4,edgeGlow:.1,pulsePeriod:4}),Object(g.jsx)("shaderPass",{attachArray:"passes",args:[k.a],"uniforms-resolution-value":[1/i.width,1/i.height]})]})]})};var _=function(){var e=Object(o.useState)("true"),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(o.useState)([{position:[0,0,0],cameraPos:[-3,2,5],name:"Default",color:"white",opacity:x},{position:[-.7,0,-1.6],cameraPos:[-1.1,2,5],name:"Machine 1",color:"white",opacity:x},{position:[.9,0,-1.6],cameraPos:[1,1,1],name:"Machine 2",color:"white",opacity:.7},{position:[2.1,0,.2],cameraPos:[1,.5,.2],name:"Machine 3",color:"white",opacity:.7}]),n=Object(l.a)(c,1)[0],i=Object(o.useState)(!1),s=Object(l.a)(i,2),j=(s[0],s[1],Object(O.animated)(m)),d=Object(O.animated)(u.a),b=Object(o.useState)({cachedPos:D,cachedTarget:R,pos:D,target:R,autoRotate:!0}),w=Object(l.a)(b,2),M=w[0],P=w[1];function S(e){n[1].color="white",n[2].color="white",n[3].color="grey",f!==e&&e>=1?(f=e,r(e),n[f].color="#414779",P({cachedPos:M.pos,cachedTarget:M.cachedTarget,pos:n[f].cameraPos,target:n[f].position,autoRotate:!1})):(f=e,r(e),n[f].color="#414779",P({cachedPos:M.pos,cachedTarget:M.cachedTarget,pos:n[f].cameraPos,target:n[f].position,autoRotate:!0}))}var k=Object(O.useSpring)({pos:M.pos,target:M.target,from:{pos:M.cachedPos,target:M.cachedTarget},config:p.config.default});return Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("div",{className:"ui",children:Object(g.jsx)("div",{children:Object(g.jsxs)("select",{onChange:function(e){r(e.target.value),S(e.target.value)},value:a,children:[Object(g.jsx)("option",{value:"0",children:"Default view"}),Object(g.jsx)("option",{value:"1",children:"Machine 1"}),Object(g.jsx)("option",{value:"2",children:"Machine 2"}),Object(g.jsx)("option",{value:"3",children:"Machine 3"})]})})}),Object(g.jsxs)(h.a,{colorManagement:!0,shadows:!0,pixelRatio:window.devicePixelRatio,gl:{antialias:!1,alpha:!1,autoClear:!0,clearDepth:!0},linear:!0,flat:!0,camera:{position:M.pos,logarithmicDepthBuffer:!0,rotation:[0,0,0],fov:5,far:1e3,near:10},onCreated:function(e){var t=e.gl;e.scene;t.toneMapping=y.LinearToneMapping},children:[Object(g.jsx)("color",{attach:"background",args:["#ffffff"]}),Object(g.jsx)(j,{cameraPosition:k.pos}),Object(g.jsx)("directionalLight",{intensity:.91,castShadow:!0,"shadow-mapSize-height":512,"shadow-mapSize-width":512,position:[0,25,8]}),Object(g.jsx)("hemisphereLight",{intensity:.41,position:[2,10,8]}),Object(g.jsx)("ambientLight",{intensity:.07,position:[0,0,0]}),Object(g.jsxs)(o.Suspense,{fallback:Object(g.jsx)(A,{}),children:[Object(g.jsx)(L,{}),Object(g.jsxs)(N,{children:[Object(g.jsx)(z,{position:[-.7,0,-1.6],rotation:[0,1.57,0],color:n[1].color}),Object(g.jsx)(E,{position:[.9,0,-1.6],rotation:[0,1.57,0],color:n[2].color}),Object(g.jsx)(B,{position:[2.1,0,.2],rotation:[0,0,0],color:n[3].color})]}),Object(g.jsxs)("group",{children:[Object(g.jsx)(v,{position:n[1].position,name:n[1].name,id:1,opacity:n[1].opacity,onMarkerClicked:S}),Object(g.jsx)(v,{position:n[2].position,name:n[2].name,id:2,opacity:n[2].opacity,onMarkerClicked:S}),Object(g.jsx)(v,{position:n[3].position,name:n[3].name,id:3,opacity:n[3].opacity,onMarkerClicked:S})]})]}),Object(g.jsx)(d,{minPolarAngle:0,enableDamping:!1,maxPolarAngle:Math.PI/2,minAzimuthAngle:-Math.PI/32,minDistance:18,maxDistance:150,target:k.target,enableRotate:M.autoRotate,enableZoom:M.autoRotate})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(g.jsx)(_,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.8f09f3e5.chunk.js.map